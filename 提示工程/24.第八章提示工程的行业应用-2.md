将承担盗窃或侵占的责任，并且应在B要求时归还珠宝。假设是错误的。

正确答案应该是假设成立，然而GPT却给出了一个错误的答案。仔细看后续的解释不难发现，GPT认为“A不能通过善意取得方式获得珠宝的所有权。A将承担盗窃或侵占的责任，并且应在B要求时归还珠宝”，所以事实上GPT本应给出正确的答案。对于此类GPT无法逻辑自洽的问题，可以通过以下方法来解决。

①角色扮演（role play），即通过赋予大语言模型领域专家的角色，使其在相关领域的任务中表现得更为专业。

②在提示中包含关键的法律背景，使结果更符合预期。

③思维链（chain of thought），即在提示中指示模型逐步思考，然后给出答案。

修改后的提示如下。

你是一位有经验的律师①，请判断以下假设是真还是假。

假设：A拿走了B忘记的珠宝，无过失地相信它属于A。在这种情况下，A不能通过善意取得获得珠宝的所有权。

前提：该假设发生在中国。②

指令：按照以下步骤进行分析（问题、法律规则、应用、结论），然后给出答案。③

来看看此时GPT给出的答案。

问题：根据中国法律，A是否能通过善意取得获得珠宝的所有权。

规则：根据《中华人民共和国民法通则》第一百零六条，善意取得是指对不属于所有人或者无处分权的动产，以合理价款从善意者以合法方式取得的行为。但是，这一规则有一些例外情况，例如当动产是丢失、被盗、被抢或者被司法或行政机关没收的。在这些情况下，原所有人可以在知道或者应当知道取得人身份和所在地之日起一年内向取得人追索。

应用：在本案中，A拿走了B遗忘的珠宝，无过失地认为是自己的。这意味着A是善意并以合法方式取得的。但是，由于B并没有自愿转让或处分珠宝，而只是忘记了，可以认为B是丢失了珠宝并仍然保留其所有权。因此，B可以在知道或者应当知道A的身份和所在地之日起一年内向A追索。因此，A不能根据民法通则第一百零六条通过善意取得获得珠宝的所有权。

结论：根据以上分析，在中国法律下，假设成立。

可以看到，此时的GPT给出了正确的答案，并且整个过程做到了引经据典，有理有据。这也说明了提示工程的重要性，只有经过良好设计的提示才能更好地引导大语言模型给出符合预期的结果。

# 8.3 医疗行业的应用

## 8.3.1 医疗行业的需求背景和潜在机会
在现代医疗技术广泛应用之前，医疗服务主要通过医疗专业人员和患者之间的面对面交流来提供。传统医疗面临着一些挑战，包括医学研究有限，医疗器械简单，以及医疗方式落后等。例如，患者需要实际出行前往医院或诊所才能获得医疗服务，通过纸质方式记录历史健康信息等。随着时代的发展，技术已逐渐成为现代医疗的重要组成部分，医疗变得更加高效、便捷和个性化，从而改善了患者的预后和整体医疗服务质量。然而，医疗和卫生领域仍然面临着诸多挑战，例如，生物医学数据和文献的指数增长，研究和实践之间的差距，技能医疗人员的短缺，以及卫生需求和偏好的多样性和复杂性。
近来兴起的大语言模型和提示工程是一项充满潜力的技术，有望推动医疗和健康领域更好地应对各种挑战。大语言模型能够从包括医学文献、临床记录、患者反馈和医疗指南在内的海量自然语言数据中学习到复杂的模式和表示。提示工程可以利用大语言模型的潜在知识和能力，并使其适用于各种医疗和健康场景，例如，它可以用于开发智能系统，协助医生做出准确的诊断和提供临床帮助，还可以分析大量的医疗数据并生成报告。此外，它还在药物发现、个性化医疗、患者诊断、医学图像分析、电子健康记录分析、临床决策支持系统和疾病预测等方面有潜在的应用。
药物研发：如果能在大量药物数据库的基础上训练大语言模型，那么就有可能从这些训练数据集中学习到潜在的相互作用模式和关系，帮助识别和设计出有效的新药物，从而缩短研发时间并降低失败风险。这些新药物也可通过提示工程来进行分析，评估其效力和安全性。
临床诊断和科研：由于大语言模型具备多个来源的知识，如Cochrane、PubMed和WHO，通过提示工程可以快速检索并总结关键的信息，并以简洁易懂的方式呈现。借助提示工程，患者可以获得有效的护理建议；临床医生可以分析医疗记录以及患者提供的症状和病史等信息，为医学诊断提供辅助信息；医学科研人员可以节省文献阅读耗费的时间，跟上最新的医学成果和最佳实践。
个性化医疗：创建聊天机器人，针对营养计划、运动计划和心理支持提供个性化的建议，促进健康管理；通过识别个体数据中的变异模式，可以为患者选择适合他们的药物，提高治疗的针对性和有效性；通过对大量日常数据的回顾总结，可以帮助用户进行早期疾病发现和预防性治疗，从而提高治愈率并降低治疗费用。
## 8.3.2 医疗行业的产品案例

医疗保健是一个超万亿美元的大赛道，同时拥有海量专业数据，目前，以GPT为代表的大语言模型在医疗保健领域的商业应用空间巨大并获得了资本的青睐。包括医院、生物技术、医疗器械和制药业在内的企业或机构都能通过使用最先进的人工智能技术，对现有的业务进行创新和升级。本小节将探讨一些医疗领域的基于大语言模型和提示工程的应用，以及它们对医疗从业人员、患者和社会的好处。

1. DAX Express：将GPT-4用于病历生成程序

2023年3月，微软公司旗下Nuance发布了与OpenAI的GPT-4集成的支持语音的医疗病历生成应用程序DAX（Dragon Ambient eXperience）。DAX Express是第一个将会话和环境人工智能（通过“倾听”医患就诊并做笔记来自动化生成临床文档）与OpenAI的GPT-4的高级推理和自然语言功能相结合的全自动临床文档应用程序。通过预设的提示模板，DAX Express可在患者就诊后几秒内自动创建草稿临床笔记，以便立即进行临床审查。该解决方案还与电子病历软件紧密集成。

2. Spot：一个自然语言/语音对话式人工智能对话助手

纽约的一家医疗人工智能初创公司Hyro，通过GPT-4大语言模型打造了Spot智能对话助手，以帮助医疗机构构建自己的知识问答库。用户只需将网站、内部文档或其他信息源导入Spot，就可以获得一个支持文本和语音输入的即用型的对话式人工智能界面。例如，患者可以向Spot询问医疗状况、症状、诊断、治疗方案、康复计划、医生推荐等，并获得即时和准确的答案，这些答案都有可靠的支持来源。此外，Spot还可以根据用户的个人信息、偏好和历史，个性化回答并生成类似人类的富有同理心的对话。

3. MedGPT：国内首款医疗大语言模型

医联公司于2023年5月推出MedGPT，这是一款专注于医疗场景的大语言模型产品，能实现疾病全流程的智能诊疗。MedGPT基于Transformer架构，能整合多种检验、检测模式，首次让线上问诊和医学检查相连。问诊后，MedGPT会根据需要开具检查项目，患者可通过医联云检验等方式完成。然后，MedGPT根据问诊和检查数据进行诊断，并制定治疗方案。患者可通过医联互联网医院享受送药服务，MedGPT还会主动提供用药指导、随访复诊、康复指导等智能化服务。MedGPT打通了多模态应用，实现了预防、诊断、治疗、康复的一体化诊疗。

## 8.3.3 典型应用场景（一）：医疗询诊

通用大语言模型能够在各种主题上生成流畅和自然的对话，为提高医疗质量和可及性提供了新的可能性。然而，这些模型却不适合直接用于医疗领域的应用，因为它们往往缺乏提供可靠和有用的医疗建议所需的领域特定知识和准确性。在这种情况下，用户可以从外部的专业医学知识库获取到权威的医学诊疗信息，将其作为上下文信息放入提示中，使得大语言模型具备可靠的医学领域知识，并借助提示工程进行决策，给出诊断建议。接下来演示如何借助提示工程实现一个基于GPT的智能医疗询诊的小应用。

首先，用户希望借助GPT（此处为GPT-4）从病人的问题中提取出关键词，于是给出如下提示。

有病人提出如下的问题，请从文本中提取出关键词，以帮助我们更好地从疾病库中查找答案。

医生你好，我平时不经常头痛，但最近我老感觉到有一侧头痛，疼痛位置大概是在我右眼和太阳穴区域。现在这次我还伴有重感冒和咳嗽。头痛是今天上午晚些时候发作的，当我咳嗽、摇头或弯腰时，痛得更厉害。在这之前，我大约四个月前有过一次同样的头痛。那一次，它是在下午发作的，持续到第二天早上。更早的时候，我也有过同样的头痛，也是在右侧，持续了一天。我正在服用的药有钙通道阻滞剂和奥美拉唑。我害怕是脑瘤。请您帮我看看是什么情况。

请在下方给出关键词，以逗号的形式分隔。

GPT给出的回复如下。

关键词：一侧头痛，眼睛和太阳穴后方，感冒和咳嗽，钙通道阻滞剂，奥美拉唑，脑瘤

然后，用户用GPT给出的关键词去权威的专业医学疾病库中检索出所有相关疾病的结果，如图8-1所示。

尽管用户拿到了所有可能的相关疾病的医学信息（包括疾病名称、病症、医学检查和治疗用药），但是具体的诊断结论还未可知。于是，用户希望GPT能帮助分析并给出诊断意见，给出的提示如下。

![image](https://github.com/user-attachments/assets/7a5cd0a6-dad8-4bd7-9f55-c56203dab26a)


图8-1 医学疾病库检索结果示例

```
# 病人问题
医生你好，我平时不经常头痛，但最近我老感觉到有一侧头痛，疼痛位置……
# 医学知识背景
以下是我们从疾病数据库中检索到的相关内容：
疾病：声带息肉
病症: ['嗓音嘶哑', '喉咙痛', '说话困难', '咳嗽', '鼻塞', '喉部肿胀', '听力下降', '喉咙有异物感', '喉咙感觉紧绷', '吞咽困难', '皮肤肿胀', '尿潴留']
医学检查: ['气管镜和喉镜检查并取活检', '职业治疗评估 (言语治疗)', '其他诊断性程序 (访谈；评估；咨询)', '物理治疗练习 (练习)', '鼻、口腔和咽部的诊断性程序', '其他物理治疗和康复', '眼科和耳科诊断和治疗']
治疗用药: ['埃索美拉唑 (奈索)', '醋酸倍氯米松鼻用制剂', '尼古丁', '鼻用阿扎司琼', '去氧肾上腺素 (达拉马克斯)', '雷贝拉唑 (阿西法)', '诺雷比霉素 (纳维宾)', '维生素A', '阿达木单抗 (修美乐)', '利妥昔单抗']
疾病：偏头痛
病症: ['头痛', '恶心', '呕吐', '头晕', '视力下降', '记忆障碍', '视野中有斑点或云状物', '面部症状', '失明', '月经期过长']
……(限于篇幅，此处省略后续条目)
# 指令
根据上面提供的信息，选出有助于回答病人问题的数据，按以下格式给出答案并给出一条不超过300字的简短评论。
疾病:
病症:
医学检查:
治疗用药:
评论:
```
此时，用户会发现一个问题，由于检索结果过多，如果把它们全都放进一个提示中，将会导致超出模型所能支持的最大文本长度限制（如GPT-4的文本长度限制为32 768个字符）。考虑到这次的应用场景是从多个数据来源中找到最相关的结果并总结得到最可能的答案，因此，可以采用分治的思想（如图8-2所示），将一个大型任务拆分为多个独立的子任务去执行，每个子任务都可以作为用于最终评判的一条证据链。

![image](https://github.com/user-attachments/assets/e354eae9-1331-4993-a7cf-ee9578c25026)


图8-2 采用分治思想的多路提示链示意

首先将从疾病库中检索得到的结果拆分为两个批次，然后分别对每个批次执行上述提示模板，得到如下两个答案。

答案1

疾病：偏头痛

症状：头痛，位于右眼和太阳穴区域，咳嗽、摇头或弯腰时加剧

医学检查：静脉输液，X 光计算机断层扫描（CT扫描），头部CT扫描 (头部CT)，磁共振成像 (MRI)，脑电图 (EEG)

治疗用药：舒马曲坦 (Imitrex)，托吡酯 (Topamax)，普鲁卡因(Compro)，利扎曲坦 (Maxalt)，纳布芬 (Nubain)，普萘洛尔，埃曲坦 (Relpax)，米德林，佐米曲坦 (Zomig)，诺氟沙星

评论：根据头痛的描述，最有可能是偏头痛，这是一种主要的头痛病，导致反复发作的中度到重度的疼痛，通常在头部的一侧，常伴有恶心、呕吐、对光和声音敏感以及视觉障碍。偏头痛可以由各种因素触发，如压力、激素变化、天气变化、缺乏睡眠、脱水、某些食物或药物。感冒和咳嗽可能加剧了偏头痛或起到了触发作用。偏头痛不是由脑瘤引起的，脑瘤很少见，通常有其他症状，如癫痫、人格改变、无力或麻木。但是，为了排除头痛的任何严重的潜在原因，如出血、感染或炎症，可能需要一些医学检查，如血液检查、CT扫描、MRI或EEG。这些检查也可以帮助确认偏头痛的诊断，并排除其他类型的头痛，如丛集头痛、鼻窦头痛或紧张型头痛。偏头痛的治疗涉及预防和急性的策略。预防性药物，如普萘洛尔、托吡酯或诺氟沙星，如果定期服用，可以帮助减少偏头痛发作的频率和严重程度。急性药物，如舒马曲坦、利扎曲坦或佐米曲坦，如果尽早服用，可以帮助停止或缓解偏头痛发作的疼痛和其他症状。其他药物，如普鲁卡因、纳布芬或米德林，可以帮助控制恶心、呕吐或炎症。静脉输液可以帮助纠正脱水，这可能加重头痛。非药物措施，如在黑暗和安静的房间休息，敷冷敷物到头部，或避免触发因素，也可以帮助应对偏头痛发作。

答案2

疾病：原因不明的耳鸣

症状：耳朵里有铃声，听力减退，头晕，耳痛，头痛，耳朵感觉堵塞

医学检查：眼科和耳科的诊断和治疗，磁共振成像 (MRI)，其他治疗性耳部操作，耳部的诊断性操作

治疗用药：鼻用阿扎司汀，沙美特罗，左西替利嗪 (Xyzal)，银杏叶提取物 (银杏)，阿莫曲普坦 (Axert)

评论：根据问题，最有可能与右眼和太阳穴区域的单侧头痛相匹配的疾病是原因不明的耳鸣。耳鸣是一种人听到一只或两只耳朵里有铃声或嗡嗡声的情况，这种声音可能是持续的或时有时无的。耳鸣可以由许多因素引起，如耳部感染、噪音暴露、衰老、药物或其他健康问题。有时，耳鸣的原因是不明的。耳鸣可以伴随其他症状，如听力减退、头晕、耳痛、耳朵感觉堵塞和头痛。当人咳嗽、摇头或弯腰时，症状可能会加重，因为这些动作可能会增加耳朵里的压力或影响脑部的血流。要诊断耳鸣，医生可能会进行全面的耳部检查、听力测试和影像检查，如MRI，以排除耳朵或脑部的任何结构异常或肿瘤。耳鸣的治疗取决于潜在的原因和症状的严重程度。一些可能有助于减少铃声或嗡嗡声的药物是鼻用阿扎司汀、沙美特罗吸入器、左西替利嗪口服片、银杏叶提取物口服胶囊和阿莫曲普坦口服片。这些药物可能有不同的作用机制，如抗炎、支气管扩张剂、抗组胺、抗氧化剂或5 - 羟色胺受体激动剂，它们可能影响耳鸣涉及的神经信号或血管。然而，这些药物并不能治愈耳鸣，而且可能有副作用或与其他药物相互作用。因此，它们应该在医生的指导下使用。其他非药物治疗耳鸣的方法包括助听器、声音疗法、认知行为疗法和放松技巧。

最后，给出如下提示，比较和综合所有的结果，由GPT决定最终的输出。

原始的问题如下：

医生你好，我平时不经常头痛，但最近我老感觉到有一侧头痛，疼痛位置大概是……

已知可能的答案有如下几种：

答案1

疾病：偏头痛

症状：头痛……

答案2

疾病：原因不明的耳鸣

症状：耳朵里有铃声，听力减退，头晕……

基于上述信息，选出最好的答案或者综合所有的答案并给出最终的答案。

GPT给出最终的答案如下。

你右眼和太阳穴区域的单侧头痛，如果咳嗽、摇头或弯腰会加重，很可能是偏头痛。偏头痛是一种头痛的类型，会导致搏动或跳动的疼痛，常伴有恶心、呕吐、对光和声音敏感和视觉障碍。 
